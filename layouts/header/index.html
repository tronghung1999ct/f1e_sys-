<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Mary's simple recipe for maple bacon donuts
                makes a sticky, sweet treat with just a hint
                of salt that you'll keep coming back for.">
    <link rel="stylesheet" href="/resources/min-css/templates.css">
    <title>Layout - Header</title>

    <script src="/resources/js/vendors/jquery-3.7.1/jquery-3.7.1.min.js"></script>
</head>
<body>
    <div class="main_page">
        <header class="header" id="header">
            <div class="header-top bg-black">
                <div class="container d-flex align-items-center px-2 py-05">
                    <button type="button" class="mr-1 btn btn-lg btn-black btn-icon btn-header_bg btn-open-popup" attr-popup="popup-menu_left">
                        <i class="icon icon-user-line"></i>
                    </button>
                    <h1 class="logo-webike-fe_system">
                        <a class="d-flex" href="/layouts/header/index.html">
                            <img height="40" width="auto" src="/resources/images/logo-webike-fe_system.png" alt="logo Webike Front-end system">
                        </a>
                    </h1>

                    <div class="flex-fill media horizon-center vertical-right">
                        <div class="header-top-navigation">
                            <a href="#" class="btn-link">
                                <span>DOCUMENT</span>
                            </a>
                            <a href="#" class="btn-link">
                                <span>ICONS</span>
                            </a>
                            <a href="#" class="btn-link">
                                <span>TEMPLATES</span>
                            </a>
                            <a href="#" class="btn-link">
                                <span>SASS</span>
                            </a>
                        </div>
                        <div class="header-top-action media">
                            <div>
                                <button type="button" class="btn btn-lg btn-black btn-icon btn-header_bg">
                                    <i class="icon icon-user-line"></i>
                                </button>
                            </div>
                            <div>
                                <button type="button" class="btn btn-lg btn-black btn-icon btn-header_bg">
                                    <i class="icon icon-user-line"></i>
                                </button>
                            </div>
                            <div>
                                <button type="button" class="mr-1 btn btn-lg btn-black btn-icon btn-header_bg btn-open-popup" attr-popup="popup-menu_right">
                                    <i class="icon icon-user-line"></i>
                                </button>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </header>
        <main id="wrapper-main_body" style="height: 200vh;">
            
        </main>


        <div id="popup-menu_left" class="popup popup-left ">
            <div class="overlay"></div>
            <div class="popup_frame">

            </div>
        </div>

        <div id="popup-menu_right" class="popup popup-right ">
            <div class="overlay"></div>
            <div class="popup_frame">

            </div>
        </div>
    </div>
</body>
<script type="text/javascript">
    const isSafari = /constructor/i.test(window.HTMLElement);

    (function($) {
        $.fn.closePopup = function() {
            $(this).removeClass("popup-open");
            // $("body").css('padding-right', '0');
            let allPopupOpen = $(".popup.popup-open");
            console.log(allPopupOpen);
            setTimeout(() => {
                $(this).hide();
                if (allPopupOpen.length <= 0) $("body").removeClass("show-popup").css('padding-right','0');
                if (isSafari)
                    $(this)
                        .find("overlay")
                        .bind("touchmove", true);
            }, 210);
        };
    })(jQuery);

    (function($) {
        $.fn.openPopup = function() {
            var scrollWidthBar = window.innerWidth - $('body').width();
            $("body").addClass("show-popup");
            $("body").css("padding-right", scrollWidthBar);
            // $(this).addClass("popup-open");
            $(this).show();
            setTimeout(() => {
                $(this).addClass("popup-open");
            }, 100);
            if (isSafari){
                $(this).find("overlay").bind("touchmove", false);
            }
        };
    })(jQuery);

    $(document).delegate(".btn-open-popup", "click", function(e) {
        let popupName = $(this).attr("attr-popup");
        if (popupName) {
            let id = "#" + popupName;
            $(id).openPopup();
        }
    });

    $(document).delegate(".btn-close-popup", "click", function() {
        $(this)
            .closest(".attr-popup")
            .closePopup();
    });

    $(document).delegate(".btn-close-popup", "click", function() {
        $(this)
            .closest(".popup-slide-up")
            .closePopup();
    });

    $(document).ready(function(){
        $(document).delegate('.overlay','click',function(){
            $(this).parent().closePopup();
        });
    });
</script>
</html>